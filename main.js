(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{I:()=>f,n:()=>m});const e=(t,e)=>{const a=[];return{isSunk:()=>{if(a.filter((t=>"X"===t)).length==t)return!0},hit:()=>a.push("X"),name:e}},a=document.querySelector(".game-info"),r=document.querySelector(".text-info");let s="hori";function o(t){for(let e=0;e<10;e++)for(let a=0;a<10;a++)if(""!=t[e][a]){const t=document.getElementById(`${e}${a}`);t.classList.add("grid-cell-with-ship"),t.dataset.ship=!0,t.classList.remove("shadow")}}function n(t){r.textContent=`Player, place your ${t}.`}function d(){let t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random());const a=document.getElementById(`${e}${t}`);if(""!=f.grid[e][t]&&"hit"!=a.dataset.hit){const r=document.createElement("i");r.className="fa-solid fa-crosshairs",a.appendChild(r),a.style.backgroundColor="#ff4f56",a.dataset.hit="hit",f.receiveAttack(t,e)}else if(""===f.grid[e][t]&&"hit"!=a.dataset.hit){const t=document.createElement("i");t.className="fa-solid fa-water",a.appendChild(t),a.dataset.hit="hit"}else d()}function i(t){const e=parseInt(t.target.dataset.x),a=parseInt(t.target.dataset.y);if(""!=m.grid[a][e]&&"hit"!=t.target.dataset.hit){const r=document.createElement("i");r.className="fa-solid fa-crosshairs",t.target.appendChild(r),t.target.style.backgroundColor="#ff4f56",t.target.dataset.hit="hit",m.receiveAttack(e,a),d()}else if(""===m.grid[a][e]&&"hit"!=t.target.dataset.hit){const e=document.createElement("i");e.className="fa-solid fa-water",t.target.appendChild(e),t.target.dataset.hit="hit",d()}else alert("This cell was already selected !")}const l=()=>{const t=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];let e=0;const a=t=>""!=t;return{grid:t,placeShip:function(e,r,o,n){if("hori"==s){let s=[];for(let a=0;a<o;a++)s.push(t[r][e+a]);if(s.some(a))return;if(null!=t[r][e+(o-1)])for(let a=0;a<o;a++)t[r][e+a]=n}else if("vert"==s){let s=[];for(let a=0;a<o;a++)s.push(t[r+a][e]);if(s.some(a))return;if(null!=t[r+(o-1)][e])for(let a=0;a<o;a++)t[r+a][e]=n}},placeComputerShip:function e(r,s,o,n){const d=Math.floor(10*Math.random());if(d>4){let d=[];for(let e=0;e<o;e++)d.push(t[s][r+e]);if(d.some(a))e(Math.floor(10*Math.random()),Math.floor(10*Math.random()),o,n);else if(null!=t[s][r+(o-1)])for(let e=0;e<o;e++)t[s][r+e]=n}else if(d<=4&&null!=t[s+(o-1)]){let d=[];for(let e=0;e<o;e++)d.push(t[s+e][r]);if(d.some(a))e(Math.floor(10*Math.random()),Math.floor(10*Math.random()),o,n);else if(null!=t[s+(o-1)][r])for(let e=0;e<o;e++)t[s+e][r]=n}else e(Math.floor(10*Math.random()),Math.floor(10*Math.random()),o,n)},receiveAttack:function(a,r){if(t[r][a].hit(),t[r][a].isSunk()){e+=1;const s=document.getElementById(t[r][a].name);s.style.textDecorationLine="line-through",s.style.color="#ff4f56"}5==e&&(alert("Game over"),document.querySelectorAll(".computer-grid-cell").forEach((t=>{t.removeEventListener("click",i)})))}}},c=document.getElementById("start"),h=document.querySelector(".game-info"),p=document.querySelector(".text-info"),f=l(),m=l(),u=e(5,"carrier"),g=e(5,"computer-carrier"),I=e(4,"battleship"),y=e(4,"computer-battleship"),M=e(3,"cruiser"),v=e(3,"computer-cruiser"),E=e(3,"submarine"),x=e(3,"computer-submarine"),L=e(2,"destroyer"),w=e(2,"computer-destroyer");let S=0,C=5;!function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("computer-grid"),r=document.createElement("div");r.classList.add("computer-grid-cell"),r.dataset.y=t,r.dataset.x=e,a.appendChild(r)}}(),function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("player-grid"),r=document.createElement("div");r.classList.add("player-grid-cell"),r.dataset.y=t,r.dataset.x=e,r.id=`${t}${e}`,a.appendChild(r)}}();const b=document.querySelectorAll(".player-grid-cell"),k=document.querySelectorAll(".computer-grid-cell");function q(t){if("vert"==s)for(let e=0;e<10*C;e+=10)null==b[parseInt(t.target.id)+10*(C-1)]||b[parseInt(t.target.id)+e].dataset.ship?b[parseInt(t.target.id)+e].classList.add("shadow-wrong"):b[parseInt(t.target.id)+e].classList.add("shadow");else if(parseInt(t.target.dataset.x)+C>10)for(let e=0;e<10-parseInt(t.target.dataset.x);e++)b[parseInt(t.target.id)+e].classList.add("shadow-wrong");else for(let e=0;e<C;e++)b[parseInt(t.target.id)+e].classList.add("shadow")}function $(t){if("vert"==s)for(let e=0;e<10*C;e+=10)null==b[parseInt(t.target.id)+10*(C-1)]||b[parseInt(t.target.id)+e].dataset.ship?b[parseInt(t.target.id)+e].classList.remove("shadow-wrong"):b[parseInt(t.target.id)+e].classList.remove("shadow");else if(parseInt(t.target.dataset.x)+C>10)for(let e=0;e<10-parseInt(t.target.dataset.x);e++)b[parseInt(t.target.id)+e].classList.remove("shadow-wrong");else for(let e=0;e<C;e++)b[parseInt(t.target.id)+e].classList.remove("shadow")}function A(t){for(let e=0;e<C;e++)b[parseInt(t.target.id)+e].dataset.ship&&b[parseInt(t.target.id)+e].classList.add("shadow-wrong")}function B(t){for(let e=0;e<C;e++)b[parseInt(t.target.id)+e].dataset.ship&&b[parseInt(t.target.id)+e].classList.remove("shadow-wrong")}function N(t){switch(S){case 0:f.placeShip(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),5,u),o(f.grid),f.grid[parseInt(t.target.dataset.y)][parseInt(t.target.dataset.x)]==u&&(S+=1,C-=1,n("battleship"));break;case 1:f.placeShip(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),4,I),o(f.grid),f.grid[parseInt(t.target.dataset.y)][parseInt(t.target.dataset.x)]==I&&(S+=1,C-=1,n("cruiser"));break;case 2:f.placeShip(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),3,M),o(f.grid),f.grid[parseInt(t.target.dataset.y)][parseInt(t.target.dataset.x)]==M&&(S+=1,n("submarine"));break;case 3:f.placeShip(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),3,E),o(f.grid),f.grid[parseInt(t.target.dataset.y)][parseInt(t.target.dataset.x)]==E&&(S+=1,C-=1,n("destroyer"));break;case 4:f.placeShip(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),2,L),o(f.grid),f.grid[parseInt(t.target.dataset.y)][parseInt(t.target.dataset.x)]==L&&(S+=1,C=0,h.textContent="",k.forEach((t=>{t.addEventListener("click",i)})));break;case 5:return}}c.addEventListener("click",(()=>{p.textContent="Player, place your carrier.",c.style.display="none",function(){const t=document.createElement("button");t.textContent="Change orientation",a.appendChild(t),t.addEventListener("click",(()=>{s="vert"==s?"hori":"vert"}))}(),b.forEach((t=>{t.addEventListener("mouseenter",q)})),b.forEach((t=>{t.addEventListener("mouseenter",A)})),b.forEach((t=>{t.addEventListener("mouseleave",$)})),b.forEach((t=>{t.addEventListener("mouseleave",B)})),b.forEach((t=>{t.addEventListener("click",N)}))})),m.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),5,g),m.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),4,y),m.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,v),m.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,x),m.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),2,w)})();