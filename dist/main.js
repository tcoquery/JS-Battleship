(()=>{"use strict";const t=t=>{const e=[];let a=!1;return{arr:e,isSunk:()=>{e.filter((t=>"X"===t)).length===t&&(a=!0)},hit:()=>e.push("X")}},e=document.getElementById("start"),a=document.querySelector(".game-info"),r=document.querySelector(".text-info");let o="hori";function n(t){for(let e=0;e<10;e++)for(let a=0;a<10;a++)if(""!=t[e][a]){const t=document.getElementById(`${e}${a}`);t.classList.remove(".player-grid-cell"),t.classList.add("grid-cell-with-ship")}}function l(t){r.textContent=`Player, place your ${t}`}e.addEventListener("click",(()=>{r.textContent="Player, place your carrier",function(){const t=document.createElement("button"),e=document.createElement("button");t.textContent="Vertical",e.textContent="Horizontal",a.appendChild(t),a.appendChild(e),t.addEventListener("click",(()=>{o="vert"})),e.addEventListener("click",(()=>{o="hori"}))}()}));const s=()=>{const t=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],e=t=>""!=t;return{grid:t,placeShip:function(a,r,n,l){if("hori"==o){let o=[];for(let e=0;e<n;e++)o.push(t[r][a+e]);if(o.some(e))return;if(null!=t[r][a+(n-1)])for(let e=0;e<n;e++)t[r][a+e]=l}else if("vert"==o){let o=[];for(let e=0;e<n;e++)o.push(t[r+e][a]);if(o.some(e))return;if(null!=t[r+(n-1)][a])for(let e=0;e<n;e++)t[r+e][a]=l}},placeComputerShip:function a(r,o,n,l){const s=Math.floor(10*Math.random());if(s>4){let s=[];for(let e=0;e<n;e++)s.push(t[o][r+e]);if(s.some(e))a(Math.floor(10*Math.random()),Math.floor(10*Math.random()),n,l);else if(null!=t[o][r+(n-1)])for(let e=0;e<n;e++)t[o][r+e]=l}else if(s<=4&&null!=t[o+(n-1)]){let s=[];for(let e=0;e<n;e++)s.push(t[o+e][r]);if(s.some(e))a(Math.floor(10*Math.random()),Math.floor(10*Math.random()),n,l);else if(null!=t[o+(n-1)][r])for(let e=0;e<n;e++)t[o+e][r]=l}else a(Math.floor(10*Math.random()),Math.floor(10*Math.random()),n,l)},receiveAttack:function(e,a){""!=t[a][e]?(t[a][e].hit(),t[a][e].isSunk(),console.log(t)):(t[a][e]="O",console.log(t))},shipsSunk:function(){t.some(e)||console.log("game over")}}},d=s(),i=s(),c=t(5),p=t(5),h=t(4),u=t(4),f=t(3),m=t(3),g=t(3),y=t(3),M=t(2),I=t(2),x=document.querySelector(".game-info");!function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("computer-grid"),r=document.createElement("div");r.classList.add("computer-grid-cell"),r.dataset.y=t,r.dataset.x=e,a.appendChild(r)}}(),function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("player-grid"),r=document.createElement("div");r.classList.add("player-grid-cell"),r.dataset.y=t,r.dataset.x=e,r.id=`${t}${e}`,a.appendChild(r)}}();let S=0;document.querySelectorAll(".player-grid-cell").forEach((t=>{t.addEventListener("click",(()=>{switch(S){case 0:d.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),5,c),n(d.grid),d.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==c&&(S+=1,l("battleship"));break;case 1:d.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),4,h),n(d.grid),d.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==h&&(S+=1,l("cruiser"));break;case 2:d.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),3,f),n(d.grid),d.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==f&&(S+=1,l("submarine"));break;case 3:d.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),3,g),n(d.grid),d.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==g&&(S+=1,l("destroyer"));break;case 4:d.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),2,M),n(d.grid),d.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==M&&(S+=1,x.textContent="",e=i,document.querySelectorAll(".computer-grid-cell").forEach((t=>{t.addEventListener("click",(()=>{e.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]===Object?(e.receiveAttack(t.dataset.x,t.dataset.y),t.textContent="X"):""===e.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]?(t.textContent="O",e.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]="O"):"O"===e.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]&&alert("This cell was already selected !")}))})));break;case 5:return}var e}))})),i.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),5,p),i.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),4,u),i.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,m),i.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,y),i.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),2,I),console.log(i.grid)})();