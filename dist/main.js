(()=>{"use strict";const t=t=>{const e=[];e.length=t;const a=t=>"X"===t;return{arr:e,isSunk:()=>{e.every(a)&&console.log("sunk")},hit:t=>e[t-1]="X"}},e=document.getElementById("start");let a="hori";function r(t){for(let e=0;e<10;e++)for(let a=0;a<10;a++)if(""!=t[e][a]){const t=document.getElementById(`${e}${a}`);t.classList.remove(".player-grid-cell"),t.classList.add("grid-cell-with-ship")}}e.addEventListener("click",(()=>{const t=document.querySelector(".game-info");t.textContent="Player, place your ships";const e=document.createElement("button"),r=document.createElement("button");e.textContent="Vertical",r.textContent="Horizontal",t.appendChild(e),t.appendChild(r),e.addEventListener("click",(()=>{a="vert"})),r.addEventListener("click",(()=>{a="hori"}))}));const o=()=>{const t=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],e=t=>""!=t;return{grid:t,placeShip:function(r,o,n,l){if("hori"==a){let a=[];for(let e=0;e<n;e++)a.push(t[o][r+e]);if(a.some(e))return;if(null!=t[o][r+(n-1)])for(let e=0;e<n;e++)t[o][r+e]=l}else if("vert"==a){let a=[];for(let e=0;e<n;e++)a.push(t[o+e][r]);if(a.some(e))return;if(null!=t[o+(n-1)][r])for(let e=0;e<n;e++)t[o+e][r]=l}},placeComputerShip:function a(r,o,n,l){const s=Math.floor(10*Math.random());if(s>4){let s=[];for(let e=0;e<n;e++)s.push(t[o][r+e]);if(s.some(e))a(r,o,n,l);else if(null!=t[o][r+(n-1)])for(let e=0;e<n;e++)t[o][r+e]=l}else if(s<=4){let s=[];for(let e=0;e<n;e++)s.push(t[o+e][r]);if(s.some(e))a(r,o,n,l);else if(null!=t[o+(n-1)][r])for(let e=0;e<n;e++)t[o+e][r]=l}},receiveAttack:function(e,a,r){t[a][e]?r.hit():t[a][e]="O"},shipsSunk:function(){t.some(e)||console.log("game over")}}},n=o(),l=o(),s=t(5),d=t(5),i=t(4),c=t(4),p=t(3),h=t(3),f=t(3),u=t(3),m=t(2),g=t(2);!function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("computer-grid"),r=document.createElement("div");r.classList.add("computer-grid-cell"),r.dataset.y=t,r.dataset.x=e,a.appendChild(r)}}(),function(){for(let t=0;t<10;t++)for(let e=0;e<10;e++){const a=document.getElementById("player-grid"),r=document.createElement("div");r.classList.add("player-grid-cell"),r.dataset.y=t,r.dataset.x=e,r.id=`${t}${e}`,a.appendChild(r)}}();let y=0;document.querySelectorAll(".player-grid-cell").forEach((t=>{t.addEventListener("click",(()=>{switch(y){case 0:n.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),5,s),r(n.grid),n.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==s&&(y+=1);break;case 1:n.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),4,i),r(n.grid),n.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==i&&(y+=1);break;case 2:n.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),3,p),r(n.grid),n.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==p&&(y+=1);break;case 3:n.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),3,f),r(n.grid),n.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==f&&(y+=1);break;case 4:n.placeShip(parseInt(t.dataset.x),parseInt(t.dataset.y),2,m),r(n.grid),n.grid[parseInt(t.dataset.y)][parseInt(t.dataset.x)]==m&&(y+=1);break;case 5:return}}))})),l.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),5,d),l.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),4,c),l.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,h),l.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),3,u),l.placeComputerShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),2,g),console.log(l.grid)})();